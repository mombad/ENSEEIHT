package fenetre;

import java.awt.Container;
import javax.swing.JButton;
import javax.swing.JLabel;
import javax.swing.JList;
import javax.swing.event.ListSelectionEvent;
import javax.swing.event.ListSelectionListener;

import territoires.*;

public class JlistListener implements ListSelectionListener {
	private JList liste;
	private int index;
	private Les_territoires territoires;
	private Territoire_test t;
	private Container contenu;
	JLabel label1 = new JLabel("");
	JLabel label2= new JLabel("");
	JLabel label3= new JLabel("");
	JLabel label4= new JLabel("");
	JLabel label5= new JLabel("");
	JLabel label6= new JLabel("");
	JLabel label7= new JLabel("");
	JButton attaquer;
	JButton recruter;
	JButton deplacer;
	JButton ameliorer;
	public JlistListener(JList liste,Les_territoires territoires,Container contenu,JLabel label1,JLabel label2,JLabel label3,JLabel label4,JLabel label5,JLabel label6,JLabel label7,JButton attaquer, JButton deplacer, JButton recruter, JButton ameliorer) {
		this.liste = liste;
		this.territoires = territoires;
		this.contenu = contenu;
		this.label1 = label1;
		this.label2 = label2;
		this.label3 = label3;
		this.label4 = label4;
		this.label5 = label5;
		this.label6 = label6;
		this.label7 = label7;
		this.attaquer = attaquer;
		this.deplacer = deplacer;
		this.recruter = recruter;
		this.ameliorer = ameliorer;
	}
	
	public int getIndex() {
		return this.index;
	}
	
	public Territoire_test getTerritoire() {
		return this.t;
	}
	
	public void add_label(Container contenu, Territoire_test t1) {
		String s = " ";
		recruter.setEnabled(false);
		label1.setText("Territoire_test numero " + t1.getNumero());
		label2.setText(".forces offensives : " + t1.getForces_offensives());
		label3.setText(".forces defensives " + t1.getForces_defensives());
		label4.setText(".capitale : " + t1.estCapitale());
		label5.setText(".Voisins : ");
		for (Territoire_test t : t1.getVoisin()) {
		     s = s  + t.getNom() + " , "; 
		}
		label6.setText(s);

		attaquer.setEnabled(true);
		deplacer.setEnabled(true);
		ameliorer.setEnabled(true);
		if(t.estCapitale().equals("non")) {
			
		}
		else {
		recruter.setEnabled(true);
		}
		
	}

	@Override
	public void valueChanged(ListSelectionEvent e) {
		// TODO Auto-generated method stub
		if (!e.getValueIsAdjusting()) {
			
			index = this.liste.getSelectedIndex();
			t = territoires.les_t.get(index);
			System.out.println("changed to index " + index + t.getNumero());
			add_label(contenu,t);

			
			
		}
	}
		

}		

