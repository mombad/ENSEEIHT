with lien;
use lien;
with Ada.Unchecked_Deallocation;
with
package body Registre is
    procedure Free is
            new Ada.Unchecked_Deallocation (Object => T_Cellule_Registre, Name => T_Registre);

    procedure Initialiser_R(R : out T_Registre) is
    begin
        R:=Null;
    end Initialiser_R;

    function Est_Vide_R(R:T_Registre) return Boolean is
    begin
        return R=Null;
    end Est_Vide_R;

    procedure Ajouter_R_individu(R: in out T_Registre;Cle: in Integer) is
        R0: T_Registre;
    begin
        if Est_Vide_R(R) then
            R:=new T_Cellule_Registre;
            R.all.Cle:=Cle;
        else
            if Est_Present_R(R,Cle) then
                raise Est_Present_Cle;
            else
                R0:=R;
                while R0.all.suivant/=null loop
                    R0:=R0.all.suivant;
                end loop;
                R0.all.suivant:= new T_Cellule_Registre;
                R0.all.suivant.Cle:=Cle;
                R0:=null;
                Detruire(R0);
            end if;
        end if;
    end Ajouter_R_individu;

    procedure Ajouter_R_info(R: in out T_Registre; Cle: in Integer) is
        R0:T_Registre;
        I0:T_Info;
        Infostr: NSTR;
    begin
        Put("Veuillez entrez une information. Par exemple 'Age : 20 ans'");
        Get_Line(Infostr);
        R0:=R;
        --recherche de la cellule correspondant à la clé
        while R0.all.Cle/=Cle loop
            R0:=R0.all.suivant;
        end loop;

        --si aucune information n'est renseignée
        if R0.all.Information=null then
            I0:= new liste_cle;
            I0.all.info:=Infostr;
            R0.all.Information:=I0;

        --s'il y a déja des informations renseignées
        else
            I0:=R0.all.Information;
            while I0.all.infosuivante/=null loop
                I0:=I0.all.infosuivante;
            end loop;
            I0.all.infosuivante:= new liste_cle;
            I0.all.infosuivante.all.info:= Infostr;
            I0:=null;
            Detruire(I0);
        end if;
    end Ajouter_R_info;
end Registre;
